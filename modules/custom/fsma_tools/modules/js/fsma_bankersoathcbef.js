import{g,i as N,a as x,b as U,c as F,d as R,e as E,r as B,f as M,_ as I,A as O,S as v,h as L,H as Y}from"./hook-in.js";import{m as q,V as A,r as k,c as y,o as V,w as n,a as d,b as a,d as T,e as c,f as o,t as i,g as f,h as H,i as P,j as u,k as b,l as w,n as j,p as z,q as K,s as W,u as G}from"./vendor.js";import{F as J}from"./FileInput.js";const Z={name:"Bankersoath",components:{FileInput:J,ApplicationWrapper:O,VueDatePicker:A},async beforeMount(){const e=v.get("Bankersoath"),{data:t}=await e.getComplaintNatures();t&&(this.complaintNatures=t.map(r=>({title:r.localisedName,value:r.id})))},mixins:[I],data:()=>({allowedFilesTranslation:Drupal.t("Allowed types: doc, docx, xls, xlsx, ppt, pptx, pdf, wav, zip, 7z, xml, txt, jpg, jpeg, png, msg",{},{context:"Bankersoath"}),reportId:"",complaintNatures:[],firstnameBank:"",formValid:null,lastnameBank:"",functionBank:"",bankName:"",firstnameReporter:"",lastnameReporter:"",nameReporter:"",telReporter:"",tel2Reporter:"",emailReporter:"",dateStart:null,dateEnd:null,facts:"",factsExtraInfo:"",natureInfringement:[],attachments:[],subject:"",submitting:!1,submitted:!1,snackShow:!1,snackType:"",timeout:5e3,snackMessage:"",rules:{required:M,requiredArray:B,isEmail:E,isName:R,isStreet:F,isNumberOrZipcode:U,isCityOrCountry:x,isTelephone:N},filesCombined:[],textAccepted:!1,submitDialogOpen:!1,i18nLabels:[{"First name *":Drupal.t("First name *",{},{context:"bankersoath"})},{"Clear date":Drupal.t("Clear date",{},{context:"bankersoath"})},{"Last name *":Drupal.t("Last name *",{},{context:"bankersoath"})},{"Function during the facts":Drupal.t("Function during the facts",{},{context:"bankersoath"})},{"Name of bank/bank agent where banking service provider was active ten times of facts *":Drupal.t("Name of bank/bank agent where banking service provider was active ten times of facts *",{},{context:"bankersoath"})},{Required:Drupal.t("Required")},{"Details of complaint":Drupal.t("Details of complaint",{},{context:"bankersoath"})},{"Fields marked with an asterisk (*) are mandatory.":Drupal.t("Fields marked with an asterisk (*) are mandatory.",{},{context:"bankersoath"})},{cancel:Drupal.t("cancel",{},{context:"bankersoath"})},{"Complaint form":Drupal.t("Complaint form",{},{context:"bankersoath"})},{"Details bank":Drupal.t("Details bank",{},{context:"bankersoath"})},{OK:Drupal.t("OK",{},{context:"bankersoath"})},{"Date of facts (or start of facts if period) *":Drupal.t("Date of facts (or start of facts if period) *",{},{context:"bankersoath"})},{"Date end of facts (if period)":Drupal.t("Date end of facts (if period)",{},{context:"bankersoath"})},{"Description facts *":Drupal.t("Description facts *",{},{context:"bankersoath"})},{"Nature of suspected infringement *":Drupal.t("Nature of suspected infringement *",{},{context:"bankersoath"})},{"Evidence (max. 20MB) *":Drupal.t("Evidence (max. 20MB) *",{},{context:"bankersoath"})},{"Additional relevant information":Drupal.t("Additional relevant information",{},{context:"bankersoath"})},{"Your details":Drupal.t("Your details",{},{context:"bankersoath"})},{"First name (reporter or contact person legal entity)":Drupal.t("First name (reporter or contact person legal entity)",{},{context:"bankersoath"})},{"Surname (reporter or contact person legal entity)":Drupal.t("Surname (reporter or contact person legal entity)",{},{context:"bankersoath"})},{"Name (if legal entity)":Drupal.t("Name (if legal entity)",{},{context:"bankersoath"})},{"E-mail":Drupal.t("E-mail",{},{context:"bankersoath"})},{"Phone number":Drupal.t("Phone number",{},{context:"bankersoath"})},{"Second phone number":Drupal.t("Second phone number",{},{context:"bankersoath"})},{Send:Drupal.t("Send",{},{context:"bankersoath"})},{Cancel:Drupal.t("Cancel",{},{context:"bankersoath"})},{"Something went wrong during your report submission!":Drupal.t("Something went wrong during your report submission!",{},{context:"bankersoath"})},{"Report successfully submitted!":Drupal.t("Report successfully submitted!",{},{context:"bankersoath"})},{"Allowed types: doc, docx, xls, xlsx, ppt, pptx, pdf, wav, zip, 7z, xml, txt, jpg, jpeg, png, msg":Drupal.t("Allowed types: doc, docx, xls, xlsx, ppt, pptx, pdf, wav, zip, 7z, xml, txt, jpg, jpeg, png, msg",{},{context:"bankersoath"})},{"Your report has been submitted":Drupal.t("Your report has been submitted",{},{context:"bankersoath"})},{"Delete all attachments":Drupal.t("Delete all attachments",{},{context:"bankersoath"})},{Required:Drupal.t("Required",{},{})}]}),computed:{formValidProp(){return this.formValid===null?!0:this.formValid},counterSizeString:function(){return this.attachments.length<=1?Drupal.t("{0} file {1} in total"):Drupal.t("{0} files {1} in total")},...q("pdb",["introText","privacyText","listOfBanksText","submittedText"]),maxDate(){const e=new Date;return this.dateEnd&&this.dateEnd<e?this.dateEnd:e},dateStartFormatted(){return this.dateStart?this.formatDate(this.dateStart.toDateString(),"DD/MM/YYYY"):""},dateEndFormatted(){return this.dateEnd?this.formatDate(this.dateEnd.toDateString(),"DD/MM/YYYY"):""},subsite:function(){let e="";return drupalSettings!=null&&drupalSettings.subsite&&(e=drupalSettings.subsite),e}},methods:{updateFiles(e){this.attachments=e},getCurrentLanguage:g,async submitComplaint(){var e;if(await this.$refs.bankersoathForm.validate(),console.log(this.formValid),this.formValid!==!1&&this.attachments.length>0){const t=v.get("Bankersoath");this.submitting=!0;const r=new FormData;r.append("Type","BankersOath"),r.append("User.CompanyName",this.nameReporter),r.append("User.FirstName",this.firstnameReporter),r.append("User.LastName",this.lastnameReporter),r.append("User.PhoneNumber",this.telReporter),r.append("User.PhoneNumber2",this.tel2Reporter),r.append("User.Email",this.emailReporter),r.append("Target.FirstName",this.firstnameBank),r.append("Target.LastName",this.lastnameBank),r.append("Target.JobTitle",this.functionBank),r.append("Target.Bank",this.bankName),r.append("Notification.Information",this.facts),r.append("Notification.OtherInformation",this.factsExtraInfo),r.append("Notification.StartDate",this.dateStart.toISOString()),this.dateEnd&&r.append("Notification.EndDate",this.dateEnd.toISOString()),(e=this.natureInfringement)==null||e.forEach(p=>{r.append("Notification.Natures",p)}),this.attachments.forEach(p=>{r.append("files",p)}),t.add(r).then(p=>{this.submitting=!1,this.submitted=!0,this.submitDialogOpen=!0,this.reportId=p.data,this.snackShow=!0,this.snackType="succes",this.snackMessage=Drupal.t("Report successfully submitted!",{},{context:"bankersoath"})}).catch(()=>{this.submitting=!1,this.snackShow=!0,this.snackType="error",this.snackMessage=Drupal.t("Something went wrong during your report submission!",{},{context:"bankersoath"})})}else this.formValid=!1,this.submitting=!1},getT(e){const t=this.i18nLabels.find(p=>Object.keys(p)[0]===e);if(t&&t[e]!=="")return t[e];const r=Drupal.t(e,{},{context:"bankersoath"});return r&&r!==""?r:Drupal.t(e)}}},Q={class:"bankersoath"},X={class:"text-h5 font-weight-bold mb-6 primary--text"},_=["innerHTML"],$={class:"font-weight-bold"},ee={class:"mb-md-10 mb-8 small-info"},te={class:"font-weight-bold"},ae=["innerHTML"],le={class:"font-weight-bold"},ne={class:"d-flex ga-4"},se={class:"d-flex ga-4 align-center"},re={class:"font-weight-bold"},oe=["innerHTML"],ie={class:"d-flex align-center ma-n2 mt-4"},de=["innerHTML"],me={class:"mt-2"};function ue(e,t,r,p,be,s){const D=k("VueDatePicker"),C=k("FileInput"),S=k("ApplicationWrapper");return V(),y(S,null,{default:n(()=>[d("div",Q,[e.submitted?(V(),y(c,{key:0},{default:n(()=>[a(o,{cols:"12"},{default:n(()=>[d("span",X,i(s.getT("Report submission successful:")),1)]),_:1})]),_:1})):T("",!0),e.submitted?(V(),y(c,{key:1,class:"mb-2 mb-md-4"},{default:n(()=>[a(o,{cols:"12"},{default:n(()=>[f(i(s.getT("Your report ID:"))+" "+i(e.reportId),1)]),_:1})]),_:1})):T("",!0),d("div",{class:"text-content mb-6",innerHTML:e.introText},null,8,_),d("h3",$,i(s.getT("Complaint form")),1),a(H,{ref:"bankersoathForm",modelValue:e.formValid,"onUpdate:modelValue":t[17]||(t[17]=l=>e.formValid=l),onSubmit:t[18]||(t[18]=P(()=>{},["prevent"]))},{default:n(()=>[d("p",ee,i(s.getT("Fields marked with an asterisk (*) are mandatory.")),1),a(c,{class:"mb-3 mb-md-0"},{default:n(()=>[a(o,{cols:"12",class:"py-0 mb-2"},{default:n(()=>[d("h4",te,i(s.getT("Details bank")),1)]),_:1}),a(o,{cols:"12",md:"6",class:"pr-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(u,{modelValue:e.firstnameBank,"onUpdate:modelValue":t[0]||(t[0]=l=>e.firstnameBank=l),variant:"solo-filled",flat:"",density:"compact",label:s.getT("First name *"),readonly:e.submitted,maxlength:"50",rules:[e.rules.isName,e.rules.required]},null,8,["modelValue","label","readonly","rules"])]),_:1}),a(o,{cols:"12",md:"6",class:"pl-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(u,{modelValue:e.lastnameBank,"onUpdate:modelValue":t[1]||(t[1]=l=>e.lastnameBank=l),variant:"solo-filled",flat:"",density:"compact",label:s.getT("Last name *"),readonly:e.submitted,maxlength:"50",rules:[e.rules.isName,e.rules.required]},null,8,["modelValue","label","readonly","rules"])]),_:1}),a(o,{cols:"12",md:"6",class:"pr-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(u,{modelValue:e.functionBank,"onUpdate:modelValue":t[2]||(t[2]=l=>e.functionBank=l),variant:"solo-filled",flat:"",density:"compact",label:s.getT("Function during the facts"),readonly:e.submitted,maxlength:"50",rules:[e.rules.isName]},null,8,["modelValue","label","readonly","rules"])]),_:1}),a(o,{cols:"12",md:"6",class:"pl-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(u,{modelValue:e.bankName,"onUpdate:modelValue":t[3]||(t[3]=l=>e.bankName=l),variant:"solo-filled",flat:"",density:"compact",label:s.getT("Name of bank/bank agent where banking service provider was active ten times of facts *"),readonly:e.submitted,maxlength:"50",rules:[e.rules.isName,e.rules.required]},null,8,["modelValue","label","readonly","rules"]),d("div",{class:"text-content small-info",innerHTML:e.listOfBanksText},null,8,ae)]),_:1})]),_:1}),a(c,{class:"mb-md-1"},{default:n(()=>[a(o,{cols:"12",class:"py-0 mb-2"},{default:n(()=>[d("h4",le,i(s.getT("Details of complaint")),1)]),_:1}),a(o,{cols:"12",md:"6",class:"pr-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(c,null,{default:n(()=>[a(o,{cols:"12",class:"pb-1"},{default:n(()=>[a(D,{config:{shadowDom:!0},"max-date":s.maxDate,"prevent-min-max-navigation":"",locale:s.getCurrentLanguage(),format:"dd/MM/yyyy",teleport:!0,"enable-time-picker":!1,modelValue:e.dateStart,"onUpdate:modelValue":t[5]||(t[5]=l=>e.dateStart=l)},{"action-row":n(({closePicker:l,selectDate:h})=>[d("div",ne,[a(b,{density:"compact",class:"px-4",color:"primary",onClick:l},{default:n(()=>{var m;return[f(i((m=s.getT("cancel"))==null?void 0:m.toUpperCase()),1)]}),_:2},1032,["onClick"]),a(b,{density:"compact",class:"px-4",color:"primary",onClick:h},{default:n(()=>{var m;return[f(i((m=s.getT("OK"))==null?void 0:m.toUpperCase()),1)]}),_:2},1032,["onClick"])])]),trigger:n(()=>[a(u,{modelValue:s.dateStartFormatted,"onUpdate:modelValue":t[4]||(t[4]=l=>s.dateStartFormatted=l),variant:"solo-filled",density:"compact",label:s.getT("Date of facts (or start of facts if period) *"),rules:[e.rules.required],"validate-on":e.formValid===!1?"input":"lazy submit","persistent-hint":"",readonly:"",filled:"",flat:""},null,8,["modelValue","label","rules","validate-on"])]),_:1},8,["max-date","locale","modelValue"])]),_:1}),a(o,{cols:"12",class:"pt-0"},{default:n(()=>[a(D,{config:{shadowDom:!0},"prevent-min-max-navigation":"",locale:s.getCurrentLanguage(),format:"dd/MM/yyyy",teleport:!0,"enable-time-picker":!1,"min-date":e.dateStart,"max-date":new Date,modelValue:e.dateEnd,"onUpdate:modelValue":t[7]||(t[7]=l=>e.dateEnd=l)},{"action-row":n(({closePicker:l,selectDate:h})=>[d("div",se,[a(b,{density:"compact",class:"px-4 mt-0",color:"primary",onClick:l},{default:n(()=>{var m;return[f(i((m=s.getT("cancel"))==null?void 0:m.toUpperCase()),1)]}),_:2},1032,["onClick"]),a(b,{density:"compact",class:"px-4 mt-0",color:"primary",onClick:h},{default:n(()=>{var m;return[f(i((m=s.getT("OK"))==null?void 0:m.toUpperCase()),1)]}),_:2},1032,["onClick"]),a(b,{"aria-label":s.getT("Clear date"),icon:"mdi:mdi-close",variant:"plain",density:"compact",onClick:m=>{e.dateEnd=null,l()}},null,8,["aria-label","onClick"])])]),trigger:n(()=>[a(u,{modelValue:s.dateEndFormatted,"onUpdate:modelValue":t[6]||(t[6]=l=>s.dateEndFormatted=l),variant:"solo-filled",density:"compact",label:s.getT("Date end of facts (if period)"),"persistent-hint":"",readonly:"",filled:"",flat:""},null,8,["modelValue","label"])]),_:1},8,["locale","min-date","max-date","modelValue"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12",md:"6",class:"pl-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(w,{modelValue:e.facts,"onUpdate:modelValue":t[8]||(t[8]=l=>e.facts=l),variant:"solo-filled",flat:"",label:s.getT("Description facts *"),density:"compact",rules:[e.rules.required],readonly:e.submitted},null,8,["modelValue","label","rules","readonly"])]),_:1}),a(o,{cols:"12",md:"6",class:"pr-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(c,null,{default:n(()=>[a(o,{cols:"12"},{default:n(()=>[a(j,{label:s.getT("Nature of suspected infringement *"),items:e.complaintNatures,rules:[e.rules.requiredArray],modelValue:e.natureInfringement,"onUpdate:modelValue":t[9]||(t[9]=l=>e.natureInfringement=l),"validate-on":e.formValid===!1?"input":"lazy submit",variant:"solo-filled",multiple:"",density:"compact"},null,8,["label","items","rules","modelValue","validate-on"])]),_:1}),a(o,{cols:"12",class:"pt-0 mt-2"},{default:n(()=>[a(C,{"form-valid":s.formValidProp,"is-required":!0,onFilesUpdated:s.updateFiles,context:"bankersoath"},null,8,["form-valid","onFilesUpdated"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12",md:"6",class:"pl-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(w,{modelValue:e.factsExtraInfo,"onUpdate:modelValue":t[10]||(t[10]=l=>e.factsExtraInfo=l),variant:"solo-filled",flat:"",label:s.getT("Additional relevant information"),density:"compact",readonly:e.submitted},null,8,["modelValue","label","readonly"])]),_:1})]),_:1}),a(c,{class:"mb-4"},{default:n(()=>[a(o,{cols:"12",class:"py-0 mb-2"},{default:n(()=>[d("h4",re,i(s.getT("Your details")),1)]),_:1}),a(o,{cols:"12",md:"6",class:"pr-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(u,{modelValue:e.firstnameReporter,"onUpdate:modelValue":t[11]||(t[11]=l=>e.firstnameReporter=l),variant:"solo-filled",flat:"",density:"compact",label:s.getT("First name (reporter or contact person legal entity)"),readonly:e.submitted,maxlength:"50",rules:[e.rules.isName]},null,8,["modelValue","label","readonly","rules"])]),_:1}),a(o,{cols:"12",md:"6",class:"pl-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(u,{modelValue:e.lastnameReporter,"onUpdate:modelValue":t[12]||(t[12]=l=>e.lastnameReporter=l),variant:"solo-filled",flat:"",density:"compact",label:s.getT("Surname (reporter or contact person legal entity)"),readonly:e.submitted,maxlength:"50",rules:[e.rules.isName]},null,8,["modelValue","label","readonly","rules"])]),_:1}),a(o,{cols:"12",md:"6",class:"pr-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(u,{modelValue:e.nameReporter,"onUpdate:modelValue":t[13]||(t[13]=l=>e.nameReporter=l),variant:"solo-filled",flat:"",density:"compact",label:s.getT("Name (if legal entity)"),readonly:e.submitted,maxlength:"50",rules:[e.rules.isName]},null,8,["modelValue","label","readonly","rules"])]),_:1}),a(o,{cols:"12",md:"6",class:"pl-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(u,{modelValue:e.emailReporter,"onUpdate:modelValue":t[14]||(t[14]=l=>e.emailReporter=l),variant:"solo-filled",flat:"",density:"compact",label:s.getT("E-mail"),readonly:e.submitted,maxlength:"50",rules:[e.rules.isEmail]},null,8,["modelValue","label","readonly","rules"])]),_:1}),a(o,{cols:"12",md:"6",class:"pr-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(u,{modelValue:e.telReporter,"onUpdate:modelValue":t[15]||(t[15]=l=>e.telReporter=l),variant:"solo-filled",flat:"",density:"compact",label:s.getT("Phone number"),readonly:e.submitted,maxlength:"20",rules:[e.rules.isTelephone]},null,8,["modelValue","label","readonly","rules"])]),_:1}),a(o,{cols:"12",md:"6",class:"pl-md-3 pt-1 pb-1 pb-md-2"},{default:n(()=>[a(u,{modelValue:e.tel2Reporter,"onUpdate:modelValue":t[16]||(t[16]=l=>e.tel2Reporter=l),variant:"solo-filled",flat:"",density:"compact",label:s.getT("Second phone number"),readonly:e.submitted,maxlength:"20",rules:[e.rules.isTelephone]},null,8,["modelValue","label","readonly","rules"])]),_:1})]),_:1}),d("div",{class:"text-content text-body-2 mb-4",innerHTML:e.privacyText},null,8,oe),d("div",ie,[a(b,{disabled:e.submitted,type:"submit",color:"primary",class:"ma-2 px-4",loading:e.submitting,onClick:s.submitComplaint},{default:n(()=>{var l;return[f(i((l=s.getT("Send"))==null?void 0:l.toUpperCase()),1)]}),_:1},8,["disabled","loading","onClick"])])]),_:1},8,["modelValue"]),a(z,{modelValue:e.snackShow,"onUpdate:modelValue":t[20]||(t[20]=l=>e.snackShow=l),timeout:e.timeout,rounded:"pill",color:e.snackType},{action:n(({attrs:l})=>[a(b,K({color:"blue",text:""},l,{onClick:t[19]||(t[19]=h=>e.snackShow=!1)}),{default:n(()=>[f(i(s.getT("close")),1)]),_:2},1040)]),default:n(()=>[f(i(e.snackMessage)+" ",1)]),_:1},8,["modelValue","timeout","color"])]),a(W,{modelValue:e.submitDialogOpen,"onUpdate:modelValue":t[22]||(t[22]=l=>e.submitDialogOpen=l),width:"auto"},{default:n(()=>[a(G,{"max-width":"400",title:s.getT("Your report has been submitted")},{text:n(()=>[d("div",{innerHTML:e.submittedText},null,8,de),d("p",me,i(e.reportId),1)]),actions:n(()=>[a(b,{class:"ms-auto",variant:"tonal",text:s.getT("OK"),onClick:t[21]||(t[21]=l=>e.submitDialogOpen=!1)},null,8,["text"])]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1})}const pe=L(Z,[["render",ue],["__scopeId","data-v-f84119b7"]]),fe={introText:e=>{const t=g();return t?e[`${t.toUpperCase()}_intro_text`].value:""},privacyText:e=>{const t=g();return t?e[`${t.toUpperCase()}_privacy_text`].value:""},listOfBanksText:e=>{const t=g();return t?e[`${t.toUpperCase()}_list_of_banks_text`].value:""},submittedText:e=>{const t=g();return t?e[`${t.toUpperCase()}_submitted_text`].value:""}};Y("fsma_bankersoath",pe,void 0,fe);
